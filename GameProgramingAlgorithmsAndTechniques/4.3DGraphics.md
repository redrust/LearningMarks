# 第四章：3D图形
## 矩阵变换
### 缩放矩阵：
s($s_x,s_y,s_z)=\left[\begin{matrix}
s_x & 0 & 0 & 0\\
0 & s_y & 0 & 0 \\
0 & 0 & s_z & 0 \\
0 & 0 & 0 & 1
\\\end{matrix}\right]$
### 平移矩阵
T($t_x,t_y,t_z)=\left[\begin{matrix}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
t_x & t_y & t_z & 0
\\\end{matrix}\right]$
### 旋转矩阵：欧拉角旋转
- 以x轴进行旋转：
RotateX($\theta)=\left[\begin{matrix}
1 & 0 & 0 & 0\\
0 & \cos\theta & -\sin\theta & 0 \\
0 & \sin\theta & \cos\theta & 0 \\
0 & 0 & 0 & 1
\\\end{matrix}\right]$
----
- 以y轴进行旋转：
RotateY($\theta)=\left[\begin{matrix}
\cos\theta & 0 & \sin\theta & 0\\
0 & 1 & 0 & 0 \\
-\sin\theta & 0 & \cos\theta & 0 \\
0 & 0 & 0 & 1
\\\end{matrix}\right]$
----
- 以z轴进行旋转：
RotateZ($\theta)=\left[\begin{matrix}
\cos\theta & -\sin\theta & 0 & 0\\
\sin\theta & \cos\theta & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\\\end{matrix}\right]$
## 1.为什么游戏中的模型使用三角片来表示？
- 答：1）游戏模型一般用多边形表示，而三角形是最简单的多边形。2）三角形三个顶点都在一个面上。3）任何形状都可以用三角形进行细分，而不会留下死角或者变形。
## 2.描述一下渲染管线中的四种主要坐标系。
- 答：1）模型坐标系：相对于模型自身的坐标系。 2）游戏世界坐标系：游戏场景的坐标系，所有对象都相对于世界坐标系原点进行偏移。 3）视角/摄像机坐标系：通过摄像机观察游戏世界的坐标系，改变摄像机的位置，也就改变了屏幕上的显示。 4）投影坐标系：将3D场景平铺在2D平面上得到的坐标系。
## 3.创建一个世界变化矩阵，平移到(2,4,6)而且关于z轴旋转90度。
- 答：
matrix=RotateX(90)*T(2,4,6)=<br>
$\left [\begin{matrix}
1 & 0 & 0 & 0\\
0 & \cos90 & -\sin90 & 0 \\
0 & \sin90 & \cos90 & 0 \\
0 & 0 & 0 & 1
\\\end{matrix}\right] *  \left[\begin{matrix}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0 \\
0 & 1 & 0 & 0 \\
2 & 4 & 6 & 1
\\\end{matrix}\right]$
=
$\left[\begin{matrix}
1 & 0 & 0 & 0\\
0 & 0 & -1 & 0 \\
0 & 1 & 0 & 0 \\
2 & 4 & 6 & 1
\\\end{matrix}\right]$
## 4.正交投影和透视投影有什么不同？
- 答：正交投影：所有在视角中的物体平铺显示在画面上，没有深度。透视投影：在视角中的物体有深度，拥有近大远小的效果，超过视距范围的物体，太近或者太远的不予以显示。
## 5.环境光和方向光有什么不同？分别给出例子。
- 答：环境光：均匀的打到场景中每一个物体上的光，没有方向，比如多云天气的太阳光。方向光：均匀打到场景中每一个物体上的光，带有方向，被方向光打到的物体有亮面和暗面，比如朝阳或者夕阳。
## 6.描述Phong光照模型的3种分量。为什么被认为是一种局部光照模型？
- 答：1）环境光：用于整体均匀的照亮场景。2）漫反射：光源作用于物体表面的主要反射。3）高光：物体表面上闪亮的高光。因为Phong光照模型不考虑二次反射。
## 7.Gouraud着色和Phong着色之间有什么不同？
- 答：1）Gouraud着色：针对每个顶点进行着色，相邻顶点之间的像素通过插值完成，需要性能较低，高光效果差，模型多边形数量对效果影响较大。2）Phong着色：针对三角形上每个像素进行单独光照计算，需要性能较高，高光效果好，对模型多边形数量没有需求。
## 8.在3D场景中使用画家算法有什么问题？深度缓冲又是怎么解决这个问题的？
- 答：1）所有3D对象都需要进行排序，而且在相机位置移动之后要不断排序，才能输出正确结果。2）需要进行大量重绘。深度缓冲区：记录像素的深度，在绘制一个像素点时，如果这个像素点比存储的深度还小，就绘制这个像素点，否则就不绘制。这样做就可以不对场景中的物体进行排序，而且也能得到正确的深度效果。但是深度缓冲无法解决重绘问题，解决重绘问题需要进行深度的pass。
## 9.为什么四元数在旋转的表示上要比欧拉角优秀？
- 答：四元数通过增加一个维度虚部，解决了欧拉角的万向结问题，可以任意轴进行旋转。而且比欧拉角更节省内存空间，四元数运算即可完成物体转向，而不需要像欧拉角一样构建旋转矩阵。
## 10.构建一个关于x轴旋转90度的四元数。
- 答：设四元数q=[$q_v,q_s$]=[$\hat{a_x}$$\sin$${90} \over{2}$,$\cos$${90} \over{2}$]=[(1,0,0)*1,0]=[1,0,0,0]