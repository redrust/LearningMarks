# 第12章:网络游戏
## 1.什么是网际网络协议?IPv4和IPv6有什么区别?
- 答:IP(Internet Protocol)协议,互联网最基础的通信协议,IPv6是对IPv4的IP地址字段进行长度扩充升级,从IP协议诞生至今,IPv4协议的32位IP地址已经将要用尽,所以升级的IPv6将其扩充到128位长度.
## 2.ICMP是什么?如何应用在游戏上?
- 答:ICMP:网际网络控制消息协议,使用ICMP发送回声包,回声包到达接收者之后会回返给发送者,通过回声包可以检测网络延迟,在多台服务器可以供玩家选择时,通过回声包检测可以让玩家自行选择延迟最低的服务器.
## 3.TCP协议主要起什么作用?
- 答:TCP是面向连接,保证有序的字节流协议.在游戏开发中,保证每条数据都能按序到达.
## 4.网络中的端口是什么?
- 答:类似于门牌号的东西,每个计算机里都会同时运行不少的程序,当外网数据包过来的时候,需要辨别这个数据包是哪个程序需要的,而不能将数据包随便给一个程序,所以每个程序都需要有一个标志,来区分程序之间的不同.
## 5.为什么对于实时游戏来说UDP协议是更好的选择?
- 答:因为TCP面向连接,按序到达,如果中间有数据包由于网络原因,没有正确到达目的地,那么会不断重发,来保证数据的一致性.UDP面向无连接的数据报,尽最大努力交付.实时性游戏并不关心已经过去的时间点上的数据.所以尽最大努力将最新的数据推送给客户端才是最理想的方案.
## 6.什么是服务器/客户端模型,与点对点模型有什么不同?
- 答:所有客户端连接到一个服务器上,服务器负责存储每个玩家的信息和数据,并且对玩家发过来的数据包进行校验,防止作弊.点对点模型是每个客户端分别连接当前在线的所有客户端,每个客户端在自己的场景里渲染其他玩家的操作和行为.
## 7.有什么是客户端预测要做的?它是怎样为玩家提升游戏体验的?
- 答:根据服务器先后下发的位置A和位置B,来进行插值运算,将其他玩家的行动给平滑化.如果服务器下发的玩家位置足够迅速和足够多,那么就可以很平滑玩家的行动,给玩家带来很流畅的游戏体验.
## 8.简单说一下RTS游戏如何应对点对点下的"帧同步"模型来工作?
- 答:将其他玩家发过来的操作数据给存储在消息队列中,在每一个同步周期更新对应玩家在游戏世界中的行为.
## 9.给一些信息作弊的例子,以及如何打败它?
- 答:1)修改游戏数据包,如果通信数据包不进行加密,那么玩家就可以轻松伪造数据包,来欺骗服务器,解决方案是加密数据包,但是会带来加密解密的负担.2)获取其他玩家信息,在FPS中,使用监听器可以截取到服务器下发的其他玩家的位置等信息,解决方案是加密数据包.
## 10.什么是中间人攻击,如何阻止?
- 答:在客户端和服务器通信的过程中,有中间人出现截取了通信的数据包,并将数据包修改之后再发给服务器.可以使用PKU加密体系来对数据包通信过程中加密以及签名验证,这样就可以避免中间人攻击.